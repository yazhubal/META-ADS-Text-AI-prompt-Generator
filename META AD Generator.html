
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>META ADS Text Prompt Generator</title>
    <style>
        :root {
            --accent: #176bf2;
            --bg: #0f0f0f;
            --card: #1a1a1a;
            --text: #e0e0e0;
            --input-bg: #252525;
            --border: #333;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); padding: 40px 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        
        .chapter { 
            background: var(--card); 
            padding: 35px; 
            border-radius: 12px; 
            border: 1px solid var(--border); 
            box-shadow: 0 10px 40px rgba(0,0,0,0.7); 
            margin-bottom: 40px;
        }
        
        .chapter-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 15px;
        }
        
        .chapter-number {
            background: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: 800;
            font-size: 14px;
        }

        h1 { margin-top: 0; font-size: 28px; color: #fff; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 30px; text-align: center; }
        h2 { margin: 0; font-size: 20px; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; }
        
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 700; margin-bottom: 8px; color: #888; text-transform: uppercase; font-size: 11px; letter-spacing: 1px; }
        input[type="text"], textarea, select { width: 100%; padding: 14px; border: 1px solid #444; background: var(--input-bg); color: #fff; border-radius: 6px; box-sizing: border-box; font-size: 15px; }
        input:focus, textarea:focus, select:focus { border-color: var(--accent); outline: none; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .checkbox-group { display: flex; flex-wrap: wrap; gap: 12px; background: #222; padding: 15px; border-radius: 6px; border: 1px solid #333; }
        .checkbox-item { display: flex; align-items: center; gap: 8px; font-size: 13px; cursor: pointer; color: #bbb; }
        
        button { background: var(--accent); color: white; border: none; padding: 18px; border-radius: 6px; font-size: 15px; font-weight: 800; cursor: pointer; width: 100%; text-transform: uppercase; margin-top: 10px; transition: 0.2s; }
        button:hover { background: #fff; color: #000; }
        
        #output, #abOutput { margin-top: 30px; display: none; }
        .instruction { background: #252525; padding: 15px; border-radius: 6px; border-left: 4px solid var(--accent); margin-bottom: 15px; font-size: 14px; color: #bbb; }
        pre { background: #000; color: #00ff41; padding: 20px; border-radius: 8px; overflow-x: auto; font-size: 14px; border: 1px solid #333; line-height: 1.5; }
        
        .copy-btn {
            background: #0074d9;
            margin-top: 15px;
        }
        
        .language-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            background: #222;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #333;
            margin-bottom: 25px;
            justify-content: center;
        }
        .lang-btn {
            background: #333;
            color: #888;
            border: 1px solid #444;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            width: auto;
            margin-top: 0;
        }
        .lang-btn.active {
            background: var(--accent);
            color: #fff;
        }
        
        .csv-ad-row {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        .csv-ad-row h4 { margin-top: 0; color: var(--accent); font-size: 14px; text-transform: uppercase; }
        
        .ab-test-config {
            background: #222;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #444;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>META ADS Text Prompt Generator</h1>

    <!-- Global Settings (Shared across chapters) -->
    <div class="language-selector" id="langSelector">
        <button class="lang-btn active" onclick="setLanguage('EN', this)">English</button>
        <button class="lang-btn" onclick="setLanguage('DE', this)">German</button>
        <button class="lang-btn" onclick="setLanguage('FR', this)">French</button>
        <button class="lang-btn" onclick="setLanguage('ES', this)">Spanish</button>
        <button class="lang-btn" onclick="setLanguage('IT', this)">Italian</button>
        <button class="lang-btn" onclick="setLanguage('PL', this)">Polish</button>
    </div>

    <!-- CHAPTER 1: JSON PROMPT BUILDER -->
    <div class="chapter" id="chapter1">
        <div class="chapter-header">
            <div class="chapter-number">1</div>
            <h2>JSON Ad Prompt Builder</h2>
        </div>
        
        <div class="grid">
            <div class="form-group">
                <label>Brand / Campaign</label>
                <input type="text" id="brand" placeholder="e.g. THOR MX, ICON, Moose">
            </div>
            <div class="form-group">
                <label>Target Audience</label>
                <input type="text" id="target" placeholder="e.g. Enduro enthusiasts">
            </div>
        </div>

        <div class="form-group">
            <label>Product / Part / Service</label>
            <textarea id="product" rows="2" placeholder="e.g. High-performance brake pads for sportbikes"></textarea>
        </div>

        <div class="grid">
            <div class="form-group">
                <label>Tone of Voice</label>
                <div class="checkbox-group" id="toneGroup">
                    <div class="checkbox-item"><input type="checkbox" value="Direct"> Direct</div>
                    <div class="checkbox-item"><input type="checkbox" value="Premium"> Premium</div>
                    <div class="checkbox-item"><input type="checkbox" value="Bold"> Bold</div>
                    <div class="checkbox-item"><input type="checkbox" value="Friendly"> Friendly</div>
                </div>
            </div>
            <div class="form-group">
                <label>Campaign Objective</label>
                <div class="checkbox-group" id="objGroup">
                    <div class="checkbox-item"><input type="checkbox" value="Sales"> Sales</div>
                    <div class="checkbox-item"><input type="checkbox" value="Leads"> Leads</div>
                    <div class="checkbox-item"><input type="checkbox" value="Traffic"> Traffic</div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>The Offer / CTA Description</label>
            <input type="text" id="offer" placeholder="e.g. Find Local Dealer Near you">
        </div>

        <button onclick="generateJSON()">Build Ad Prompt JSON</button>

        <div id="output">
            <div class="instruction">
                <strong>Next Step:</strong> Copy the JSON below and paste it into Gemini/ChatGPT with the instruction: <em>"Act as a senior META copywriter and create 3 ad versions based on this data."</em>
            </div>
            <pre id="jsonOutput"></pre>
            <button class="copy-btn" onclick="copyToClipboard('jsonOutput')">Copy JSON Prompt</button>
        </div>
    </div>

    <!-- CHAPTER 2: A/B TESTING VARIATION BUILDER -->
    <div class="chapter" id="chapter2">
        <div class="chapter-header">
            <div class="chapter-number">2</div>
            <h2>A/B Testing Variation Builder</h2>
        </div>
        
        <p style="font-size: 14px; color: #888; margin-bottom: 20px;">Define specific variables to test (e.g., Two different hooks or two different offers) to generate a specialized A/B test prompt.</p>

        <div class="ab-test-config">
            <div class="form-group">
                <label>Variable to Test</label>
                <select id="abVariable">
                    <option value="Hook / Opening Sentence">Hook / Opening Sentence</option>
                    <option value="The Offer / CTA">The Offer / CTA</option>
                    <option value="Psychological Angle">Psychological Angle</option>
                    <option value="Benefit Focus">Benefit Focus</option>
                </select>
            </div>
            <div class="grid">
                <div class="form-group">
                    <label>Version A (Control)</label>
                    <input type="text" id="abVersionA" placeholder="e.g. Stop 30% faster today">
                </div>
                <div class="form-group">
                    <label>Version B (Variant)</label>
                    <input type="text" id="abVersionB" placeholder="e.g. Never miss a braking point again">
                </div>
            </div>
        </div>

        <button onclick="generateABJSON()" style="background: #6f42c1;">Build A/B Test Prompt JSON</button>

        <div id="abOutput">
            <div class="instruction">
                <strong>A/B Strategy:</strong> This prompt tells the AI to create ads specifically testing the two variations provided above.
            </div>
            <pre id="abJsonDisplay"></pre>
            <button class="copy-btn" onclick="copyToClipboard('abJsonDisplay')">Copy A/B JSON Prompt</button>
        </div>
    </div>

    <!-- CHAPTER 3: META ADS CSV EXPORT -->
    <div class="chapter" id="chapter3">
        <div class="chapter-header">
            <div class="chapter-number">3</div>
            <h2>Meta Ads CSV Export</h2>
        </div>

        <div class="grid" style="margin-bottom: 25px;">
            <div class="form-group">
                <label>Website URL</label>
                <input type="text" id="url" placeholder="https://www.yourbrand.com/landing-page">
            </div>
            <div class="form-group">
                <label>Call to Action (CTA)</label>
                <select id="cta">
                    <option value="LEARN_MORE">Learn More</option>
                    <option value="SHOP_NOW">Shop Now</option>
                    <option value="SIGN_UP">Sign Up</option>
                    <option value="GET_OFFER">Get Offer</option>
                    <option value="BOOK_NOW">Book Now</option>
                </select>
            </div>
        </div>

        <div class="csv-ad-row">
            <h4>Ad Version 1</h4>
            <div class="form-group"><label>Headline</label><input type="text" id="ad1_headline"></div>
            <div class="form-group"><label>Primary Text</label><textarea id="ad1_text" rows="3"></textarea></div>
            <div class="form-group"><label>Description</label><input type="text" id="ad1_desc"></div>
        </div>

        <div class="csv-ad-row">
            <h4>Ad Version 2</h4>
            <div class="form-group"><label>Headline</label><input type="text" id="ad2_headline"></div>
            <div class="form-group"><label>Primary Text</label><textarea id="ad2_text" rows="3"></textarea></div>
            <div class="form-group"><label>Description</label><input type="text" id="ad2_desc"></div>
        </div>

        <div class="csv-ad-row">
            <h4>Ad Version 3</h4>
            <div class="form-group"><label>Headline</label><input type="text" id="ad3_headline"></div>
            <div class="form-group"><label>Primary Text</label><textarea id="ad3_text" rows="3"></textarea></div>
            <div class="form-group"><label>Description</label><input type="text" id="ad3_desc"></div>
        </div>

        <button onclick="downloadCSV()" style="background: #28a745;">Download Meta Ads CSV</button>
    </div>
</div>

<script>
let currentLanguage = 'EN';

const TRANSLATIONS = {
    EN: {
        role: "Expert META Ads Strategist & Senior Performance Copywriter. You have 10+ years of experience in conversion-centric marketing for the powersports and enthusiast industries. Your specialty is creating high-performance ad copy that stops the scroll and drives action using psychological triggers and proven marketing frameworks.",
        industry: "Powersports / Motorbikes",
        requirements: [
            "Create 3 distinct ad versions using different psychological angles (e.g., AIDA, PAS, or Benefit-Driven).",
            "Primary Text: The hook MUST be in the first 125 characters to avoid mobile cutoff. Start with a strong problem, question, or bold statement. Lead into value and clear CTA.",
            "Headline: Max 40 characters. High-impact, benefit-driven, and urgency-focused.",
            "Description: Max 30 characters. Trust-builder, secondary benefit, or social proof.",
            "Style: No emojis, no clichés, no corporate jargon. Be direct, authoritative, and persuasive. Use power words relevant to powersports enthusiasts.",
            "IMPORTANT: All ad content must be written in English."
        ],
        ab_requirements: [
            "This is an A/B test campaign. You MUST focus on testing a specific variable.",
            "Variable to test: {VARIABLE}",
            "Version A: {VERSION_A}",
            "Version B: {VERSION_B}",
            "Create 2 ad variations for Version A and 2 ad variations for Version B (Total 4 ads).",
            "Ensure the tested variable is the primary difference while keeping other elements consistent for a clean test.",
            "Primary Text: Hook in first 125 characters.",
            "Headline: Max 40 characters.",
            "IMPORTANT: All ad content must be written in English."
        ]
    },
    DE: {
        role: "Experte für META-Anzeigenstrategie & Senior Performance Copywriter. Sie verfügen über mehr als 10 Jahre Erfahrung im konversionszentrierten Marketing für die Powersports- und Enthusiastenbranche. Ihre Spezialität ist die Erstellung von Hochleistungs-Anzeigentexten, die das Scrollen stoppen und Aktionen mithilfe psychologischer Trigger und bewährter Marketing-Frameworks auslösen.",
        industry: "Motorsport / Motorräder",
        requirements: [
            "Erstellen Sie 3 verschiedene Anzeigenversionen unter Verwendung unterschiedlicher psychologischer Blickwinkel (z. B. AIDA, PAS oder nutzenorientiert).",
            "Primärer Text: Der Hook MUSS in den ersten 125 Zeichen stehen, um ein Abschneiden auf Mobilgeräten zu vermeiden. Beginnen Sie mit einem starken Problem, einer Frage oder einer mutigen Aussage. Führen Sie zu Wert und klarem CTA.",
            "Schlagzeile: Maximal 40 Zeichen. Wirkungsvoll, nutzenorientiert und auf Dringlichkeit fokussiert.",
            "Beschreibung: Maximal 30 Zeichen. Vertrauensbildner, sekundärer Vorteil oder Social Proof.",
            "Stil: Keine Emojis, keine Klischees, kein Fachjargon. Seien Sie direkt, autoritär und überzeugend. Verwenden Sie Power-Wörter, die für Powersports-Enthusiasten relevant sind.",
            "WICHTIG: Alle Werbeinhalte müssen in deutscher Sprache verfasst sein."
        ],
        ab_requirements: [
            "Dies ist eine A/B-Test-Kampagne. Sie MÜSSEN sich auf das Testen einer bestimmten Variable konzentrieren.",
            "Zu testende Variable: {VARIABLE}",
            "Version A: {VERSION_A}",
            "Version B: {VERSION_B}",
            "Erstellen Sie 2 Anzeigenvarianten für Version A und 2 Anzeigenvarianten für Version B (insgesamt 4 Anzeigen).",
            "Stellen Sie sicher, dass die getestete Variable der Hauptunterschied ist, während andere Elemente für einen sauberen Test konsistent bleiben.",
            "Primärer Text: Hook in den ersten 125 Zeichen.",
            "Schlagzeile: Maximal 40 Zeichen.",
            "WICHTIG: Alle Werbeinhalte müssen in deutscher Sprache verfasst sein."
        ]
    },
    FR: {
        role: "Expert en stratégie publicitaire META et concepteur-rédacteur Senior Performance. Vous avez plus de 10 ans d'expérience dans le marketing axé sur la conversion pour les industries des sports motorisés et des passionnés. Votre spécialité est de créer des textes publicitaires de haute performance qui arrêtent le défilement et incitent à l'action en utilisant des déclencheurs psychologiques et des cadres marketing éprouvés.",
        industry: "Sports motorisés / Motos",
        requirements: [
            "Créez 3 versions publicitaires distinctes utilisant différents angles psychologiques (par exemple, AIDA, PAS ou axé sur les bénéfices).",
            "Texte principal : L'accroche DOIT figurer dans les 125 premiers caractères pour éviter d'être coupée sur mobile. Commencez par un problème fort, une question ou une déclaration audacieuse. Enchaînez sur la valeur et un appel à l'action clair.",
            "Titre : Max 40 caractères. À fort impact, axé sur les bénéfices et sur l'urgence.",
            "Description : Max 30 caractères. Élément de réassurance, bénéfice secondaire ou preuve sociale.",
            "Style : Pas d'emojis, pas de clichés, pas de jargon d'entreprise. Soyez direct, autoritaire et persuasif. Utilisez des mots puissants pertinents pour les passionnés de sports motorisés.",
            "IMPORTANT : Tout le contenu publicitaire doit être rédigé en français."
        ],
        ab_requirements: [
            "Il s'agit d'une campagne de test A/B. Vous DEVEZ vous concentrer sur le test d'une variable spécifique.",
            "Variable à tester : {VARIABLE}",
            "Version A : {VERSION_A}",
            "Version B : {VERSION_B}",
            "Créez 2 variations publicitaires pour la version A et 2 pour la version B (Total 4 publicités).",
            "Assurez-vous que la variable testée est la principale différence tout en gardant les autres éléments cohérents pour un test propre.",
            "Texte principal : Accroche dans les 125 premiers caractères.",
            "Titre : Max 40 caractères.",
            "IMPORTANT : Tout le contenu publicitaire doit être rédigé en français."
        ]
    },
    ES: {
        role: "Estratega experto en anuncios de META y redactor publicitario senior de rendimiento. Tienes más de 10 años de experiencia en marketing centrado en la conversión para las industrias de deportes de motor y entusiastas. Tu especialidad es crear textos publicitarios de alto rendimiento que detengan el scroll e impulsen la acción utilizando disparadores psicológicos y marcos de marketing probados.",
        industry: "Deportes de motor / Motocicletas",
        requirements: [
            "Crea 3 versiones de anuncios distintas utilizando diferentes ángulos psicológicos (por ejemplo, AIDA, PAS o basadas en beneficios).",
            "Texto principal: El gancho DEBE estar en los primeros 125 caracteres para evitar el corte en móviles. Comienza con un problema fuerte, una pregunta o una declaración audaz. Dirige hacia el valor y una llamada a la acción clara.",
            "Título: Máximo 40 caracteres. De alto impacto, centrado en beneficios y en la urgencia.",
            "Descripción: Máximo 30 caracteres. Generador de confianza, beneficio secundario o prueba social.",
            "Estilo: Sin emojis, sin clichés, sin jerga corporativa. Sé directo, autoritario y persuasivo. Utiliza palabras de poder relevantes para los entusiastas de los deportes de motor.",
            "IMPORTANTE: Todo el contenido publicitario debe estar redactado en español."
        ],
        ab_requirements: [
            "Esta es una campaña de prueba A/B. DEBES enfocarte en probar una variable específica.",
            "Variable a probar: {VARIABLE}",
            "Versión A: {VERSION_A}",
            "Versión B: {VERSION_B}",
            "Crea 2 variaciones de anuncios para la Versión A y 2 para la Versión B (Total 4 anuncios).",
            "Asegúrate de que la variable probada sea la diferencia principal mientras mantienes otros elementos consistentes para una prueba limpia.",
            "Texto principal: Gancho en los primeros 125 caracteres.",
            "Título: Máximo 40 caracteres.",
            "IMPORTANTE: Todo el contenido publicitario debe estar redactado en español."
        ]
    },
    IT: {
        role: "Esperto in Strategia Pubblicitaria META e Senior Performance Copywriter. Hai oltre 10 anni di esperienza nel marketing orientato alla conversione per i settori dei motori e degli appassionati. La tua specialità è creare testi pubblicitari ad alte prestazioni che fermino lo scorrimento e spingano all'azione utilizzando leve psicologiche e framework di marketing collaudati.",
        industry: "Motori / Motociclette",
        requirements: [
            "Crea 3 versioni di annunci distinti utilizzando diverse angolazioni psicologiche (ad es. AIDA, PAS o basate sui benefici).",
            "Testo principale: Il gancio DEVE essere nei primi 125 caratteri per evitare il taglio sui dispositivi mobili. Inizia con un problema forte, una domanda o un'affermazione audace. Prosegui con il valore e una chiara chiamata all'azione.",
            "Titolo: Max 40 caratteri. Di alto impatto, orientato ai benefici e all'urgenza.",
            "Descrizione: Max 30 caratteri. Elemento di fiducia, beneficio secondario o prova sociale.",
            "Stile: Niente emoji, niente cliché, niente gergo aziendale. Sii diretto, autorevole e persuasivo. Usa parole forti rilevanti per gli appassionati di motori.",
            "IMPORTANTE: Tutti i contenuti pubblicitari devono essere redatti in italiano."
        ],
        ab_requirements: [
            "Questa è una campagna di A/B test. DEVI concentrarti sul test di una variabile specifica.",
            "Variabile da testare: {VARIABLE}",
            "Versione A: {VERSION_A}",
            "Versione B: {VERSION_B}",
            "Crea 2 varianti di annuncio per la Versione A e 2 per la Versione B (Totale 4 annunci).",
            "Assicurati che la variabile testata sia la differenza principale, mantenendo costanti gli altri elementi per un test pulito.",
            "Testo principale: Gancio nei primi 125 caratteri.",
            "Titolo: Max 40 caratteri.",
            "IMPORTANTE: Tutti i contenuti pubblicitari devono essere redatti in italiano."
        ]
    },
    PL: {
        role: "Ekspert ds. strategii reklamowej META i Senior Performance Copywriter. Masz ponad 10 lat doświadczenia w marketingu nastawionym na konwersję dla branży sportów motorowych i pasjonatów. Twoją specjalnością jest tworzenie wysokowydajnych tekstów reklamowych, które zatrzymują przewijanie i skłaniają do działania przy użyciu wyzwalaczy psychologicznych i sprawdzonych frameworków marketingowych.",
        industry: "Sporty motorowe / Motocykle",
        requirements: [
            "Stwórz 3 różne wersje reklam, korzystając z różnych kątów psychologicznych (np. AIDA, PAS lub skoncentrowane na korzyściach).",
            "Tekst główny: Haczyk MUSI znaleźć się w pierwszych 125 znakach, aby uniknąć ucięcia na urządzeniach mobilnych. Zacznij od mocnego problemu, pytania lub odważnego stwierdzenia. Przejdź do wartości i jasnego wezwania do działania.",
            "Nagłówek: Maksymalnie 40 znaków. Silnie oddziałujący, skoncentrowany na korzyściach i pilności.",
            "Opis: Maksymalnie 30 znaków. Budowanie zaufania, dodatkowa korzyść lub dowód społeczny.",
            "Styl: Bez emoji, bez kliszy, bez korporacyjnego żargonu. Bądź bezpośredni, autorytatywny i przekonujący. Używaj słów mocy istotnych dla entuzjastów sportów motorowych.",
            "WAŻNE: Wszystkie treści reklamowe muszą być przygotowane w języku polskim."
        ],
        ab_requirements: [
            "To jest kampania z testami A/B. MUSISZ skupić się na przetestowaniu konkretnej zmiennej.",
            "Zmienna do przetestowania: {VARIABLE}",
            "Wersja A: {VERSION_A}",
            "Wersja B: {VERSION_B}",
            "Stwórz 2 warianty reklam dla Wersji A i 2 warianty dla Wersji B (łącznie 4 reklamy).",
            "Upewnij się, że testowana zmienna jest główną różnicą, podczas gdy inne elementy pozostają spójne, aby zapewnić czysty test.",
            "Tekst główny: Haczyk w pierwszych 125 znakach.",
            "Nagłówek: Maksymalnie 40 znaków.",
            "WAŻNE: Wszystkie treści reklamowe muszą być przygotowane w języku polskim."
        ]
    }
};

function setLanguage(lang, btn) {
    currentLanguage = lang;
    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}

function getSelected(containerId) {
    const checkboxes = document.querySelectorAll(`#${containerId} input:checked`);
    return Array.from(checkboxes).map(cb => cb.value);
}

function generateJSON() {
    const translation = TRANSLATIONS[currentLanguage];
    const data = {
        role: translation.role,
        industry: translation.industry,
        campaign_data: {
            brand: document.getElementById('brand').value,
            product: document.getElementById('product').value,
            target_audience: document.getElementById('target').value,
            tones: getSelected('toneGroup'),
            objective: getSelected('objGroup'),
            offer: document.getElementById('offer').value
        },
        requirements: translation.requirements
    };

    document.getElementById('jsonOutput').textContent = JSON.stringify(data, null, 4);
    document.getElementById('output').style.display = 'block';
    window.scrollTo({ top: document.getElementById('output').offsetTop - 50, behavior: 'smooth' });
}

function generateABJSON() {
    const translation = TRANSLATIONS[currentLanguage];
    const variable = document.getElementById('abVariable').value;
    const versionA = document.getElementById('abVersionA').value;
    const versionB = document.getElementById('abVersionB').value;

    const abReqs = translation.ab_requirements.map(req => {
        return req.replace('{VARIABLE}', variable)
                  .replace('{VERSION_A}', versionA)
                  .replace('{VERSION_B}', versionB);
    });

    const data = {
        role: translation.role,
        industry: translation.industry,
        strategy: "A/B Testing",
        test_setup: {
            variable: variable,
            version_a: versionA,
            version_b: versionB
        },
        campaign_data: {
            brand: document.getElementById('brand').value,
            product: document.getElementById('product').value,
            target_audience: document.getElementById('target').value,
            tones: getSelected('toneGroup'),
            objective: getSelected('objGroup'),
            offer: document.getElementById('offer').value
        },
        requirements: abReqs
    };

    document.getElementById('abJsonDisplay').textContent = JSON.stringify(data, null, 4);
    document.getElementById('abOutput').style.display = 'block';
    window.scrollTo({ top: document.getElementById('abOutput').offsetTop - 50, behavior: 'smooth' });
}

function downloadCSV() {
    const brand = document.getElementById('brand').value || "Campaign";
    const target = document.getElementById('target').value || "Target";
    const url = document.getElementById('url').value || "https://example.com";
    const cta = document.getElementById('cta').value;

    const ads = [
        { 
            headline: document.getElementById('ad1_headline').value,
            text: document.getElementById('ad1_text').value,
            desc: document.getElementById('ad1_desc').value,
            name: `${brand}_${target}_Ad1`
        },
        { 
            headline: document.getElementById('ad2_headline').value,
            text: document.getElementById('ad2_text').value,
            desc: document.getElementById('ad2_desc').value,
            name: `${brand}_${target}_Ad2`
        },
        { 
            headline: document.getElementById('ad3_headline').value,
            text: document.getElementById('ad3_text').value,
            desc: document.getElementById('ad3_desc').value,
            name: `${brand}_${target}_Ad3`
        }
    ];

    const headers = [
        "Campaign Name", "Ad Set Name", "Ad Name", "Ad Status", 
        "Campaign Status", "Ad Set Status", "Headline", "Primary Text", 
        "Description", "Website URL", "Call to Action"
    ];

    let csvContent = headers.join(",") + "\n";

    ads.forEach(ad => {
        if (ad.headline || ad.text) {
            const row = [
                `"${brand}"`,
                `"${target}"`,
                `"${ad.name}"`,
                '"PAUSED"',
                '"PAUSED"',
                '"PAUSED"',
                `"${ad.headline.replace(/"/g, '""')}"`,
                `"${ad.text.replace(/"/g, '""')}"`,
                `"${ad.desc.replace(/"/g, '""')}"`,
                `"${url}"`,
                `"${cta}"`
            ];
            csvContent += row.join(",") + "\n";
        }
    });

    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    const filename = `${brand.replace(/\s+/g, '_')}_MetaAds.csv`;
    
    link.href = URL.createObjectURL(blob);
    link.setAttribute("download", filename);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

function copyToClipboard(elementId) {
    const text = document.getElementById(elementId).textContent;
    const temp = document.createElement('textarea');
    temp.value = text;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand('copy');
    document.body.removeChild(temp);
    
    // Find the button that was clicked
    const btn = event.target;
    const original = btn.textContent;
    btn.textContent = 'Copied!';
    btn.style.background = '#28a745';
    setTimeout(() => {
        btn.textContent = original;
        btn.style.background = '#0074d9';
    }, 1200);
}
</script>

</body>
</html>